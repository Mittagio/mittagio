---
description: Wochenplan teilen â€“ Magic Link, Web Share API, Ã¶ffentliche Kunden-Ansicht
globs: app/index.html
---

# Wochenplan â€Teilenâ€œ â€“ Magic Link & Kunden-Ansicht

## Regel: Share-URL und Web Share API

- **Teilen-Button** (Wochenplan): Nutzt die **native Web Share API** â€“ auf dem Handy Ã¶ffnet sich das System-MenÃ¼ (WhatsApp, Instagram, E-Mail usw.).
- **Link:** `[Origin]/#/plan/[Anbieter-ID]` (Ã¶ffentliche URL).
- **Share-Titel** fÃ¼r WhatsApp/Status: â€Unser Wochenplan ist online!â€œ
- Fallback: Wenn Web Share nicht verfÃ¼gbar, Link in die Zwischenablage kopieren.

Technisch: `shareWeekPlan()` baut nur **aktivierte (live)** Gerichte der aktuellen Woche, speichert Snapshot in `localStorage` unter `public_plan_[providerId]`, setzt `shareUrl`, `shareTitle`, `shareText` und ruft `navigator.share({ title, text, url })` auf.

---

## Regel: Ã–ffentliche Kunden-Ansicht (#/plan/[Anbieter-ID])

- **Inhalt:** Alle aktivierten Gerichte (Status: GrÃ¼n) der aktuellen Woche.
- **Design:** Clean, mobil, mit **Originalbildern** und den **3 SÃ¤ulen** unter dem Bild: ğŸ´ (Vor Ort), ğŸ«1ï¸âƒ£ (Abholnummer), ğŸ”„ (Mehrweg).
- **Preise:** Nur der **Verkaufspreis** wird angezeigt â€“ **keine** GebÃ¼hren-Logik (4,99 â‚¬ / 0,89 â‚¬) fÃ¼r den Kunden.
- Wenn kein Snapshot vorhanden (z. B. anderer GerÃ¤t/Link abgelaufen): Hinweis â€Wochenplan nicht verfÃ¼gbarâ€œ + Link â€Zur Appâ€œ.

Technisch: Beim Ã–ffnen von `#/plan/[id]` wird `showPlanPublicView(id)` aufgerufen, liest `localStorage.getItem('public_plan_' + id)` und rendert die Karten mit Bild, 3 SÃ¤ulen, Gerichtsname, Tag, Preis.

---

## Regel: WhatsApp-Vorschau (OG-Image)

- **Standard:** In `index.html` sind feste **og:title**, **og:description**, **og:image** gesetzt (z. B. â€Mittagio â€“ Wochenplanâ€œ, â€Unser Wochenplan ist online!â€œ, Standardbild).
- **Provider-spezifisch** (Name + eigenes Gerichtsfoto): erfordert serverseitige Auslieferung unterschiedlicher Meta-Tags pro URL (z. B. `/plan/[id]` als eigene Route mit dynamischem HTML oder Meta-API).

---

## Kurz

| Thema              | Umsetzung |
|--------------------|-----------|
| Share-API          | `navigator.share` mit title â€Unser Wochenplan ist online!â€œ, url `#/plan/[providerId]` |
| Ã–ffentliche Ansicht| Read-Only, 3 SÃ¤ulen, nur Verkaufspreis, Snapshot aus localStorage |
| OG-Vorschau         | Feste og:meta in HTML; provider-spezifisch optional per Server |
