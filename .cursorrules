# Mittagio - Cursor Rules

## Arbeitsverzeichnis (PFLICHT)

- **Alle Ã„nderungen ausschlieÃŸlich in:** `C:\Projekte\Mittagio.de 27.01.2026 12.00 Uhr\mittagio`
- **Alle anderen Pfade dauerhaft ignorieren** (z. B. `c:\Projekte\mittagio`, andere Workspaces, Obs-Ordner).

## Projekt-Ãœbersicht

**Mittagio** ist eine digitale Vermittlungs- & Entdeckungsplattform fÃ¼r strukturierte Mittagstische.

- **Typ:** Single-Page-Application (SPA) in `app/index.html`
- **Deployment:** GitHub Pages (`/mittagio/app/`)
- **Base-Path:** `<base href="/mittagio/app/">`
- **Service Worker:** aktuell deaktiviert (`sw.js.disabled`)

## Wichtigste Projektprinzipien

### Grundprinzip
- **Vermittlungs- & Entdeckungsplattform** (KEIN Marktplatz, KEIN Checkout, KEIN Abo)
- VertrÃ¤ge entstehen **ausschlieÃŸlich zwischen Anbieter und Endkunde vor Ort**
- **Keine Mindestlaufzeit, kein Vertrag mit Endkunden**

### Klare Trennung der Bereiche

**Endkundenbereich:**
- Ã–ffentlich, ohne Login, ohne Profil, ohne Registrierung
- Routen: `/`, `/entdecken`, `/datenschutz`, `/impressum`, `/agb`

**Anbieterbereich:**
- Eigener App-Bereich unter `/anbieter/*`
- Eigene Layout-Shell (Header + Anbieter-BottomNav)
- Routen: `/anbieter/dashboard`, `/anbieter/profil`, `/anbieter/profil/bearbeiten`, `/anbieter/recht/*`, `/anbieter/hilfe`
- `/anbieter` â†’ Redirect auf `/anbieter/dashboard`

**âŒ KEINE Vermischung von Endkunden- & Anbieter-Logik**

## Routing-Regeln

### Logo-Regel
- Klick auf Mittagio-Logo im Anbieterbereich â†’ **immer `/anbieter/dashboard`**

### Back-Regel
- âŒ **KEIN** Browser-Back (`history.back()`)
- âœ… **Immer explizite In-App-Navigation**
- Fallback immer: `/anbieter/dashboard`

### Dead-Click-Regel (SEHR WICHTIG)
- **Jeder klickbare Button MUSS reagieren**
- Erlaubt: Navigation, Toast/Hinweis
- âŒ Verboten: Klick ohne Reaktion

## UI-Texte (VERBINDLICH)

**WICHTIG:** Diese Texte MÃœSSEN exakt so verwendet werden. Keine eigenen Erfindungen!

### Endkunden-Dashboard ("Mein Mittagio")
- **Titel:** Dein Mittag in der NÃ¤he
- **Willkommenskarte:**
  - Ãœberschrift: Willkommen bei Mittagio ğŸ‘‹
  - Text: Finde frische Mittagsangebote in deiner NÃ¤he.
  - Button: Angebote entdecken
- **KÃ¼rzlich angesehen:** Titel + Button "Angebote ansehen"
- **Anbieter-CTA:**
  - Titel: Als Anbieter starten
  - Text: Mittagtische einfach online anbieten
  - Button: Zum Anbieterbereich

### âŒ Verbotene Begriffe (Endkunden)
- Profil anlegen
- Meine Bestellungen
- Zur Mittagsbox
- Bestellen
- Abholcodes, Abholcode, Ticket, Express-Abholung (fÃ¼r Endkunden)
### âœ… Pflicht (Wording)
- AusschlieÃŸlich **Abholnummer** (nie Abholcode, nie Ticket).

### Anbieter-Dashboard
- **Erlaubt:** Inserate, Abholung, Kochbuch, Button "Inserat erstellen"
- **Optional (graue Stepper-Tags):** âœ Inserat erstellen, âœ Gericht wÃ¤hlen, âœ Abholcode (optional)
- **âŒ Entfernen:** "Willkommen bei Mittagio", "Starte mit deinem ersten Gericht", "Adresse hinzufÃ¼gen"

### Rechtstexte
- âœ… Exakt so: AGB, Impressum, Datenschutz
- âŒ Nie: AGB-Kurzfassung, Hinweise wie "Ã¶ffnet dein E-Mail-Programm"

**VollstÃ¤ndige UI-Texte:** Siehe `CURSOR_UI_TEXTE.md`  
**Design-System (STOP & RESET, Polaroid):** Siehe `MITTAGIO_UI_FRAMEWORK.md`  
**Detailseite Gericht (Schiefertafel, finale Struktur):** Siehe `DETAILSEITE_GERICHT_SPEC.md`

## Swipe-Modus & 3-SÃ¤ulen-System

### 1. Benennung & Begriffe
- Die Funktion heiÃŸt konsistent **â€Swipe-Modusâ€œ**.
- âŒ **Niemals:** â€Ticketâ€œ, â€Abholcodeâ€œ.
- âœ… **Nur:** **Abholnummer** (Nutzer-Identifikation).

### 2. Drei-SÃ¤ulen-Regel (Emoji-Logik)
Jede Karte im Swipe-Modus hat **zwingend genau drei Symbole** in der FuÃŸzeile â€“ **ohne begleitenden Text**:

| Slot | Symbol | Bedeutung |
|------|--------|-----------|
| 1 | ğŸ´ | Vor Ort (Essen vor Ort mÃ¶glich) |
| 2 | ğŸ§¾ | Abholnummer (wird bei Auswahl generiert) |
| 3 | ğŸ”„ | Mehrweg (Nachhaltiges Pfandsystem) |

- Slots bleiben fest; bei fehlendem Feature: dezente Platzhalter-Box, kein WegrÃ¼cken.

### 3. UI & Interaktion
- **Stil:** Polaroid (Sofortbildkamera) fÃ¼r Gerichte; **reinweiÃŸ**, keine Schiefertafel.
- **Button-Leiste** (drei zentrale Aktions-Buttons am unteren Rand):
  - **Links (Rot):** âŒ Keine Lust
  - **Mitte (Grau/Blau):** ğŸ”„ NÃ¤chstes Gericht
  - **Rechts (GrÃ¼n):** â¤ï¸ğŸ´ Will ich / Favorit

### 4. System-BeschrÃ¤nkungen
- Es darf **nur eine aktive Sitzung pro Nutzer** geben.
- â€Vor-Ort-Logikâ€œ **nicht** in Nutzerkommunikation verwenden.

## Datenschutz & Endkunden

### Endkunden-Datenschutz
- Gilt fÃ¼r **Besucher & Endkunden**
- Route: `/datenschutz`
- Keine Registrierung, keine Bestellungen, keine Zahlungen, kein Nutzerkonto
- Kein Marketing-Tracking, keine Werbung
- DSGVO-konform (MVP-Level)

### Erlaubte Endkunden-Daten
- Technisch notwendige Daten
- Standort max. **Stadt / Region**
- Session-basierte Anzeige (z. B. zuletzt angesehen)

### Nicht erlaubt
- Profil anlegen
- "Meine Bestellungen"
- Warenkorb / Box / Checkout
- Abholcodes fÃ¼r Endkunden
- Personalisierte Nutzerprofile

## Code-QualitÃ¤t & Standards

### Technische Regeln
- Alle DOM-Zugriffe mit **Null-Checks** absichern
- **Keine `history.back()`** verwenden
- **Immer explizite Navigation**
- Jeder Button muss reagieren (Dead-Click-Regel)
- **Toast statt Alert**: Immer `showToast('Nachricht')` verwenden, nie `alert()`
- **Arbeitsverzeichnis**: Immer in `C:\Projekte\mittagio` arbeiten (NICHT OneDrive)

### Design-System (Farben & Haptik)
- **Mittagio-Gelb**: `#FFD700` (Sattes, warmes Gelb â€“ wie eine frische Kruste)
- **KÃ¼chen-Anthrazit**: `#121826` (Dunkel, edel, hoher Kontrast)
- **Schatten fÃ¼r gelbe Buttons**: `box-shadow: 0 25px 50px -12px rgba(255, 215, 0, 0.25)` (Schwebe-Effekt)
- **CSS-Variablen**: `var(--brand)` = `#FFD700`, `var(--border)` fÃ¼r Rahmen
- **Micro-Interactions**: Buttons mit `transform: scale(0.98)` bei `:active` (0.1s)

### Design-Standards
- **Premium Card-Design**: Horizontales Layout (`.dish-card`, 140px HÃ¶he)
- **Lucide Icons**: Immer `<i data-lucide="icon-name"></i>` verwenden
- **Nach Rendering**: `lucide.createIcons()` aufrufen
- **Buttons**: MindesthÃ¶he 44px (Fat-Finger-Safe), runde Icon-Buttons 34px
- **CTA-Buttons**: `h-16` (64px), `rounded-3xl`, `bg-[#FFD700]`, `text-black`, `font-weight: 900`

### Implementierte Features
- **Tinder-Swipe**: View-Toggle Liste/Swipe, Touch-Gesten, Haptic Feedback, Match Modal
- **Mittagspausen-Timer**: Gehzeit-Berechnung (5 km/h), "Noch X Min zu FuÃŸ" Badge
- **Social-Proof**: "Heute schon Xx bestellt" Badge (gelb, users-Icon)
- **Invite-Feature**: "Ich hole mir heute [Gericht] bei [Metzger] â€“ kommst du mit?"
- **Skeleton-Screens**: Loading-Placeholder mit pulse-Animation
- **Foto-KI**: Mock GPT-4o Vision API, Auto-Tagging von Allergenen (ohne MengenschÃ¤tzungen)
- **Ein-Hand-Check-in (USP)**: GroÃŸe Abholnummern-Kacheln (72px), Tap-to-Complete, GrÃ¼ner Flash, Sortierung nach Abholzeit
- **No-Limits Inseratsflow**: Keine Mengenangaben, prominenter "Ausverkauft"/"Noch da" Toggle, active=false Gerichte verschwinden aus Feed

### Projektstruktur
```
mittagio/
â”œâ”€â”€ app/                    # Hauptcode (SPA)
â”‚   â”œâ”€â”€ index.html         # Single-Page-Application
â”‚   â”œâ”€â”€ manifest.json      # PWA Manifest
â”‚   â”œâ”€â”€ assets/            # Bilder, Icons
â”‚   â””â”€â”€ sw.js.disabled     # Service Worker (deaktiviert)
â”œâ”€â”€ docs/                  # Produkt- & UX-Konzept
â”œâ”€â”€ tickets/               # Feature-Tickets
â””â”€â”€ .cursorrules           # Diese Datei
```

### Wichtige Dateien fÃ¼r Kontext
- `CURSOR_CONTEXT_MITTAGIO.md` - VollstÃ¤ndige Projektzusammenfassung
- `CURSOR_UI_TEXTE.md` - Verbindliche UI-Texte
- `CURSOR_CONTEXT_MITTAGIO_KURZ.md` - Kurzfassung
- `PROMPTS.md` - Wiederverwendbare Master-Prompts (Prompt-Library)

## Golden Rules (fÃ¼r Cursor)

> Wenn sich etwas **wie ein Shop oder Account** anfÃ¼hlt â†’ **falsch**
> Wenn ein Klick **nichts tut** â†’ **nicht done**
> Wenn Endkunde & Anbieter vermischt sind â†’ **Bug**

## Empfohlener Cursor-Prompt

**Immer davor schreiben:**
> "Bitte strikt nach der Cursor-Gesamtzusammenfassung Mittagio (Stand 24.01.2026) arbeiten und ausschlieÃŸlich die verbindlichen UI-Texte verwenden."

## Git & Synchronisation

- Alle Ã„nderungen mÃ¼ssen committed und gepusht werden
- Schnell-Sync: `sync-to-github.bat` (Windows) oder `sync-to-github.sh` (Mac/Linux)
- Siehe `SYNC_CHECKLIST.md` fÃ¼r Details

---

**Stand:** 26.01.2026  
**Letzte Aktualisierung:** 24.01.2026 (Kontext-Dateien)
